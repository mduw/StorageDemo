(this.webpackJsonpstoragememo=this.webpackJsonpstoragememo||[]).push([[0],{28:function(n,e,t){},29:function(n,e,t){},38:function(n,e,t){"use strict";t.r(e);var o=t(0),r=t(16),c=t.n(r),a=(t(28),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function i(n){navigator.serviceWorker.register(n).then((function(n){n.onupdatefound=function(){var e=n.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(n){console.error("Error during service worker registration:",n)}))}t(29);var s=t(2),u=t(6),l=t.n(u),d=t(9),f=1048576,j=function(n){var e;try{e=new Intl.NumberFormat("en-us",{maximumFractionDigits:0}).format(n/f)}catch(t){e=Math.round(n/f)}return"".concat(e," MB")};function b(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,e="abcdefghijklmnopqrstuvwxyz".split(""),t=e.length,o=[];n--;)o.push(e[Math.random()*t|0]);return o.join("")}var h,p,O,g=t(15),x=t(17),v=t.n(x)()((function(n,e){return{quota:{total:0,usage:0},updateQuota:function(e){return n((function(n){return n.quota=Object(g.a)(Object(g.a)({},n.quota),e)}))}}})),E=t(3),m=t(4),w=t(22),D={};D.Btn=m.a.button(h||(h=Object(E.a)(["\n  background-color: ",";\n  color: ",";\n  padding: ",";\n  width: ",";\n  font-size: ",";\n  border-radius: 4px;\n  height: auto;\n  box-shadow: none;\n  border: none;\n  opacity: ",";\n  outline: none;\n  &:hover {\n    cursor: pointer;\n  }\n"])),(function(n){return n.backgroundColor?n.backgroundColor:"#0096ff"}),(function(n){return n.color?n.color:"white"}),(function(n){return n.padding?n.padding:"10px 20px"}),(function(n){return n.width?n.width:"auto"}),(function(n){return n.fontSize?n.fontSize:"1em"}),(function(n){return n.disabled?.5:1})),D.InputField=m.a.input(p||(p=Object(E.a)(["\n  display: block;\n  width: auto;\n  padding: 10px;\n  font-size: ",";\n  &:focus {\n    outline: none;\n    box-shadow: none;\n  }\n"])),(function(n){return n.fontSize?n.fontSize:"1em"})),D.Link=Object(m.a)(w.a)(O||(O=Object(E.a)(["\n  position: absolute;\n  text-decoration: none;\n  padding: 10px;\n  color: block;\n  font-weight: bold;\n  font-size: 1.2em;\n  color:white;\n  background-color: #008fe5;\n"])));var S,B,k,I,C,A,T,y,R,L=D,N={};N.Wrapper=m.a.div(S||(S=Object(E.a)(["\n  padding: 24px;\n  min-width: 500px;\n"]))),N.Btn=Object(m.a)(L.Btn)(B||(B=Object(E.a)(["\n  float: right;\n  width: 100px;\n  margin: 20px 0 20px 20px;\n  text-align: center;\n  outline: none;\n  opacity: 0.9;\n  &:hover { opacity: 1; }\n"]))),N.InfoWrapper=m.a.span(k||(k=Object(E.a)(["\n  position: relative;\n  top: 50%;\n"]))),N.Value=m.a.span(I||(I=Object(E.a)(["\n  font-size: 1.2em;\n  font-weight: bold;\n"]))),N.Section=m.a.section(C||(C=Object(E.a)(["\n  display: block;\n  border-top: 0px solid lightgray;\n  margin: 26px auto;\n  height: 60px;\n  width: 50%;\n  padding: 0 10px;\n  @media (max-width: 990px) {\n    width: 100%;\n  }\n"]))),N.SectionOuter=Object(m.a)(N.Section)(A||(A=Object(E.a)(["\n  border: none;\n  margin-top: 10vh;\n"]))),N.Btn.Clear=Object(m.a)(N.Btn)(T||(T=Object(E.a)(["\n  background: #D44500;\n  width: 100px;\n"]))),N.Btn.ClearAll=Object(m.a)(N.Btn)(y||(y=Object(E.a)(["\n  margin: -30px auto;\n  width: 220px;\n  float: right;\n  background: #D44500;\n"]))),N.InputField=Object(m.a)(L.InputField)(R||(R=Object(E.a)(["\n  float: right;\n  margin: 20px 0 0 20px;\n  text-align: center;\n  padding: 8px;\n  width: 35px;\n"])));var F=N,W=t(1),V=function(){var n=Object(d.a)(l.a.mark((function n(e){var t;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=!1,!navigator.storage||!navigator.storage.persist){n.next=7;break}return n.next=4,navigator.storage.persisted();case 4:t=n.sent,console.log("Persisted storage status: ".concat(t)),e(t);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();var z=function(n){n.refetch,n.setRefetch;var e=Object(o.useState)(!0),t=Object(s.a)(e,2),r=t[0],c=t[1],a=v((function(n){return n.quota})),i=v((function(n){return n.updateQuota}));return Object(o.useEffect)((function(){V((function(n){return c(n)}));var n=setInterval((function(){!function(n){n&&navigator.storage.estimate().then((function(e){var t=e.quota,o=e.usage;n({total:t,usage:o})})).catch((function(n){return console.log("ERROR ",n)}))}(i)}),1e3);return function(){clearInterval(n)}}),[]),Object(W.jsxs)(F.SectionOuter,{children:[Object(W.jsxs)("p",{children:["isPersisted ="," ",Object(W.jsx)(F.Value,{children:r.toString().toUpperCase()})]}),Object(W.jsxs)("div",{children:["Used ="," ",Object(W.jsxs)(F.Value,{children:[j(a.usage)," / ",j(a.total)]})]}),Object(W.jsxs)("div",{children:["Available ="," ",Object(W.jsx)(F.Value,{children:j(a.total-a.usage)})]})]})},M=t(23),q=["type","defaultVal","placeholder","postTask"],U=function(n){var e=n.type,t=void 0===e?"string":e,r=n.defaultVal,c=void 0===r?"1":r,a=n.placeholder,i=n.postTask,u=Object(M.a)(n,q),l=Object(o.useState)(c),d=Object(s.a)(l,2),f=d[0],j=d[1];return Object(o.useEffect)((function(){f&&i("number"===t?parseInt(f):f)}),[f]),Object(W.jsx)(F.InputField,{style:u,placeholder:a,value:f,onChange:function(n){return j(n.target.value)}})},G=window,H=G.localStorage,_=G.sessionStorage;function P(n){var e=0;for(var t in n)n.hasOwnProperty(t)&&(e+=t.length+n.getItem(t).length);return(e/f).toFixed(0)}function Q(n){n.clear()}var J=function(n){var e=n.storageType,t=n.name,r=Object(o.useState)(e.length),c=Object(s.a)(r,2),a=c[0],i=c[1],u=Object(o.useState)(0),l=Object(s.a)(u,2),d=l[0],j=l[1];return Object(o.useEffect)((function(){var n=function(){return i(P(e))},t=document.getElementById("clearAll-Btn");return t.addEventListener("click",n),function(){t.removeEventListener("click",n)}}),[]),Object(o.useEffect)((function(){var n=setInterval((function(){var n=P(e);n!==d&&i(n)}),1500);return function(){clearInterval(n)}}),[]),Object(W.jsxs)(F.Section,{children:[Object(W.jsxs)(F.InfoWrapper,{children:[t," = ",Object(W.jsxs)(F.Value,{children:[a,"MB"]})]}),Object(W.jsx)(F.Btn.Clear,{onClick:function(){Q(e),i(e.length)},children:"Empty"}),Object(W.jsx)(F.Btn,{onClick:function(){!function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o="key".concat(n.length+1,"_").concat(e,"MB");try{n.setItem(o,b(e*f)),t&&t()}catch(r){console.log("ERROR: '".concat(r.name,"'"))}}(e,d,(function(){console.log("".concat(t,": ADDED ").concat(d,"MB")),i(P(e))}))},children:"Add"}),Object(W.jsx)(U,{postTask:function(n){return j(n)}})]})},K=function(){return Object(W.jsx)(J,{storageType:H,name:"Local Storage"})},Y=function(){return Object(W.jsx)(J,{storageType:_,name:"Session Storage"})},$="demo_db",X={users:"users",messages:"messages"};function Z(n){console.log(n)}function nn(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=indexedDB.open($);e.onerror=function(n){Z("IndexedDB ERR: FAILED TO CONNECT")},e.onsuccess=function(){Z("IndexedDB: CONNECTED TO DB"),n&&n(e.result)},e.onupgradeneeded=function(e){var t=e.currentTarget.result;for(var o in X)t.objectStoreNames.contains(o)&&t.deleteObjectStore(o),t.createObjectStore(o);nn(n)}}function en(n){n?(n.close(),Z("IndexedDB: CONNECTION CLOSED")):Z("IndexedDB: DB NOT FOUND")}var tn=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=window.indexedDB.deleteDatabase($);e.oncomplete=function(){console.log("IndexedDB: ",$,"IS DELETED"),n&&n()},e.onerror=function(){console.log("IndexedDB: FAILED TO DELETE",$)},e.onblocked=function(){console.log("IndexedDB: OPERATION BEING BLOCKED")}},on=function(){var n=Object(o.useState)(!0),e=Object(s.a)(n,2),t=e[0],r=e[1],c=Object(o.useState)(1),a=Object(s.a)(c,2),i=a[0],u=a[1],l=Object(o.useState)(0),d=Object(s.a)(l,2),j=d[0],h=d[1],p=Object(o.useState)(),O=Object(s.a)(p,2),g=O[0],x=O[1];return Object(o.useEffect)((function(){nn((function(n){en(n),r(!1)}))}),[]),Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(F.Section,{children:[Object(W.jsxs)(F.InfoWrapper,{children:["IndexedDB = ",Object(W.jsxs)(F.Value,{children:[j,"MB"]})]}),Object(W.jsx)(F.Btn.Clear,{disabled:t,onClick:function(){return tn((function(){return h(0)}))},children:"Reset"}),Object(W.jsx)(F.Btn,{disabled:t,onClick:function(){return function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=X.messages,o=b(n*f),r="msg_".concat(Date.now().toString());try{nn((function(n){var c=n.transaction([t],"readwrite").objectStore(t).add(o,r);c.onerror=function(){Z("IndexedDB ERR: FAILED TO ADD DATA")},c.onsuccess=function(){Z("IndexedDB: DATA ROW ADDED"),en(n),e&&e()}}))}catch(c){Z("IndexedDB ERR:")}}(i,(function(){return h(j+i)}))},children:"Add"}),Object(W.jsx)(U,{type:"number",postTask:function(n){return u(n)}})]}),Object(W.jsxs)(F.Section,{children:[Object(W.jsx)(F.Btn.Clear,{disabled:t,onClick:function(){return function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:X.messages,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{nn((function(o){var r=o.transaction([e],"readwrite").objectStore(e).delete(n);r.onerror=function(){Z("IndexedDB ERR: FAILED TO DELETE")},r.onsuccess=function(){Z("IndexedDB: DATA ROW DELETED"),en(o),t&&t()}}))}catch(o){console.log("IndexedDB ERR:",o)}}(g,X.messages)},children:"Delete"}),Object(W.jsx)(U,{defaultVal:"",placeholder:"Object key",width:"80px",postTask:function(n){return x(n)}})]})]})},rn="demo-cache",cn=function(){var n=Object(d.a)(l.a.mark((function n(e,t){var o,r,c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o="/cache_".concat(Date.now().toString(),"_").concat(e,"MB"),r=new Response(b(e*f)),n.next=4,caches.open(rn);case 4:return c=n.sent,n.abrupt("return",c.put(o,r).then((function(){console.log('CACHE STORAGE: SUCCESSFULLY ADDED "'.concat(o,'"')),t()})).catch((function(n){alert("CACHE STORAGE: ERROR! FAILED TO WRITE CACHE")})));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();function an(){return sn.apply(this,arguments)}function sn(){return(sn=Object(d.a)(l.a.mark((function n(){var e;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,caches.open(rn);case 2:return e=n.sent,n.next=5,e.keys();case 5:n.sent.forEach((function(n){e.delete(n)})),caches.delete(rn).then((function(){console.log("CACHE STORAGE:",rn,"IS DELETED")})).then((function(){window.location.reload(!0)})).catch((function(n){return console.error("CACHE STORAGE: FAILED TO DELETE",rn,n)}));case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var un=function(){var n=Object(o.useState)(0),e=Object(s.a)(n,2),t=e[0],r=e[1],c=Object(o.useState)(0),a=Object(s.a)(c,2),i=a[0],u=a[1];return Object(W.jsxs)(F.Section,{children:[Object(W.jsxs)(F.InfoWrapper,{children:["Cache Storage = ",Object(W.jsxs)(F.Value,{children:[t,"MB"]})]}),Object(W.jsx)(F.Btn.Clear,{onClick:function(){return an()},children:"Empty"}),Object(W.jsx)(F.Btn,{onClick:function(){return cn(i,(function(){return r(t+i)}))},children:"Add"}),Object(W.jsx)(U,{type:"number",postTask:function(n){return u(n)}})]})},ln=function(){var n=Object(o.useState)(!0),e=Object(s.a)(n,2),t=e[0],r=e[1];return Object(W.jsxs)(F.Wrapper,{children:[Object(W.jsx)("h2",{className:"center",children:"Offline Storage Demo"}),Object(W.jsx)(z,{refetch:t,setRefetch:r}),Object(W.jsx)(K,{refetch:t}),Object(W.jsx)(Y,{refetch:t}),Object(W.jsx)(un,{}),Object(W.jsx)(on,{}),Object(W.jsx)(F.SectionOuter,{children:Object(W.jsx)(F.Btn.ClearAll,{id:"clearAll-Btn",onClick:function(){Q(window.localStorage),Q(window.sessionStorage),an(),tn(),r(!t)},width:"100%",children:"CLEAR ALL"})})]})},dn=function(){return Object(W.jsx)("div",{className:"App",children:Object(W.jsx)(ln,{})})};c.a.render(Object(W.jsx)(dn,{}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/StorageDemo",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/StorageDemo","/service-worker.js");a?(!function(n){fetch(n).then((function(e){404===e.status||-1===e.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(n){n.unregister().then((function(){window.location.reload()}))})):i(n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):i(n)}))}}()}},[[38,1,2]]]);
//# sourceMappingURL=main.5de40803.chunk.js.map