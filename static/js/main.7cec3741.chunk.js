(this.webpackJsonpstoragememo=this.webpackJsonpstoragememo||[]).push([[0],{28:function(e,n,t){},29:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var o=t(0),r=t(16),c=t.n(r),a=(t(28),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function i(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}t(29);var s=t(6),u=t.n(s),l=t(7),d=t(2),f=1048576,j=function(e){var n;try{n=new Intl.NumberFormat("en-us",{maximumFractionDigits:0}).format(e/f)}catch(t){n=Math.round(e/f)}return"".concat(n," MB")};function b(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,n="abcdefghijklmnopqrstuvwxyz".split(""),t=n.length,o=[];e--;)o.push(n[Math.random()*t|0]);return o.join("")}var h,p,g,O=t(15),x=t(17),v=t.n(x)()((function(e,n){return{quota:{total:0,usage:0},updateQuota:function(n){return e((function(e){return e.quota=Object(O.a)(Object(O.a)({},e.quota),n)}))}}})),w=t(3),m=t(4),E=t(22),D={};D.Btn=m.a.button(h||(h=Object(w.a)(["\n  background-color: ",";\n  color: ",";\n  padding: ",";\n  width: ",";\n  font-size: ",";\n  border-radius: 4px;\n  height: auto;\n  box-shadow: none;\n  border: none;\n  opacity: ",";\n  outline: none;\n  &:hover {\n    cursor: pointer;\n  }\n"])),(function(e){return e.backgroundColor?e.backgroundColor:"#0096ff"}),(function(e){return e.color?e.color:"white"}),(function(e){return e.padding?e.padding:"10px 20px"}),(function(e){return e.width?e.width:"auto"}),(function(e){return e.fontSize?e.fontSize:"1em"}),(function(e){return e.disabled?.5:1})),D.InputField=m.a.input(p||(p=Object(w.a)(["\n  display: block;\n  width: auto;\n  padding: 10px;\n  font-size: ",";\n  &:focus {\n    outline: none;\n    box-shadow: none;\n  }\n"])),(function(e){return e.fontSize?e.fontSize:"1em"})),D.Link=Object(m.a)(E.a)(g||(g=Object(w.a)(["\n  position: absolute;\n  text-decoration: none;\n  padding: 10px;\n  color: block;\n  font-weight: bold;\n  font-size: 1.2em;\n  color:white;\n  background-color: #008fe5;\n"])));var S,B,k,C,I,y,A,T,R,L=D,N={};N.Wrapper=m.a.div(S||(S=Object(w.a)(["\n  padding: 24px;\n  min-width: 500px;\n"]))),N.Btn=Object(m.a)(L.Btn)(B||(B=Object(w.a)(["\n  float: right;\n  width: 100px;\n  margin: 20px 0 20px 20px;\n  text-align: center;\n  outline: none;\n  opacity: 0.9;\n  &:hover { opacity: 1; }\n"]))),N.InfoWrapper=m.a.span(k||(k=Object(w.a)(["\n  position: relative;\n  top: 50%;\n"]))),N.Value=m.a.span(C||(C=Object(w.a)(["\n  font-size: 1.2em;\n  font-weight: bold;\n"]))),N.Section=m.a.section(I||(I=Object(w.a)(["\n  display: block;\n  border-top: 0px solid lightgray;\n  margin: 26px auto;\n  height: 60px;\n  width: 50%;\n  padding: 0 10px;\n  @media (max-width: 990px) {\n    width: 100%;\n  }\n"]))),N.SectionOuter=Object(m.a)(N.Section)(y||(y=Object(w.a)(["\n  border: none;\n  margin-top: 10vh;\n"]))),N.Btn.Clear=Object(m.a)(N.Btn)(A||(A=Object(w.a)(["\n  background: #D44500;\n  width: 100px;\n"]))),N.Btn.ClearAll=Object(m.a)(N.Btn)(T||(T=Object(w.a)(["\n  margin: -30px auto;\n  width: 220px;\n  float: right;\n  background: #D44500;\n"]))),N.InputField=Object(m.a)(L.InputField)(R||(R=Object(w.a)(["\n  float: right;\n  margin: 20px 0 0 20px;\n  text-align: center;\n  padding: 8px;\n  width: 35px;\n"])));var F=N,W=t(1),V=function(){var e=Object(l.a)(u.a.mark((function e(n){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,!navigator.storage||!navigator.storage.persist){e.next=7;break}return e.next=4,navigator.storage.persisted();case 4:t=e.sent,console.log("Persisted storage status: ".concat(t)),n(t);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var z=function(e){e.refetch,e.setRefetch;var n=Object(o.useState)(!0),t=Object(d.a)(n,2),r=t[0],c=t[1],a=v((function(e){return e.quota})),i=v((function(e){return e.updateQuota}));return Object(o.useEffect)((function(){V((function(e){return c(e)}));var e=setInterval((function(){!function(e){e&&navigator.storage.estimate().then((function(n){var t=n.quota,o=n.usage;e({total:t,usage:o})})).catch((function(e){return console.log("ERROR ",e)}))}(i)}),1e3);return function(){clearInterval(e)}}),[]),Object(W.jsxs)(F.SectionOuter,{children:[Object(W.jsxs)("p",{children:["isPersisted ="," ",Object(W.jsx)(F.Value,{children:r.toString().toUpperCase()})]}),Object(W.jsxs)("div",{children:["Used ="," ",Object(W.jsxs)(F.Value,{children:[j(a.usage)," / ",j(a.total)]})]}),Object(W.jsxs)("div",{children:["Available ="," ",Object(W.jsx)(F.Value,{children:j(a.total-a.usage)})]})]})},M=t(23),U=["type","defaultVal","placeholder","postTask"],q=function(e){var n=e.type,t=void 0===n?"string":n,r=e.defaultVal,c=void 0===r?"1":r,a=e.placeholder,i=e.postTask,s=Object(M.a)(e,U),u=Object(o.useState)(c),l=Object(d.a)(u,2),f=l[0],j=l[1];return Object(o.useEffect)((function(){f&&i("number"===t?parseInt(f):f)}),[f]),Object(W.jsx)(F.InputField,{style:s,placeholder:a,value:f,onChange:function(e){return j(e.target.value)}})},G=window,H=G.localStorage,P=G.sessionStorage;function _(e){var n=0;for(var t in e)e.hasOwnProperty(t)&&(n+=t.length+e.getItem(t).length);return(n/f).toFixed(0)}function Q(e){e.clear()}var J=function(e){var n=e.storageType,t=e.name,r=Object(o.useState)(n.length),c=Object(d.a)(r,2),a=c[0],i=c[1],s=Object(o.useState)(0),u=Object(d.a)(s,2),l=u[0],j=u[1];return Object(o.useEffect)((function(){var e=function(){return i(_(n))},t=document.getElementById("clearAll-Btn");return t.addEventListener("click",e),function(){t.removeEventListener("click",e)}}),[]),Object(o.useEffect)((function(){var e=setInterval((function(){var e=_(n);e!==l&&i(e)}),1500);return function(){clearInterval(e)}}),[]),Object(W.jsxs)(F.Section,{children:[Object(W.jsxs)(F.InfoWrapper,{children:[t," = ",Object(W.jsxs)(F.Value,{children:[a,"MB"]})]}),Object(W.jsx)(F.Btn.Clear,{onClick:function(){Q(n),i(n.length)},children:"Empty"}),Object(W.jsx)(F.Btn,{onClick:function(){!function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o="key".concat(e.length+1,"_").concat(n,"MB");try{e.setItem(o,b(n*f)),t&&t()}catch(r){console.log("ERROR: '".concat(r.name,"'"))}}(n,l,(function(){console.log("".concat(t,": ADDED ").concat(l,"MB")),i(_(n))}))},children:"Add"}),Object(W.jsx)(q,{type:"number",postTask:function(e){return j(e)}})]})},K=function(){return Object(W.jsx)(J,{storageType:H,name:"Local Storage"})},Y=function(){return Object(W.jsx)(J,{storageType:P,name:"Session Storage"})},$="demo_db",X={users:"users",messages:"messages"};function Z(e){console.log(e)}function ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=indexedDB.open($);n.onerror=function(e){Z("IndexedDB ERR: FAILED TO CONNECT")},n.onsuccess=function(){Z("IndexedDB: CONNECTED TO DB"),e&&e(n.result)},n.onupgradeneeded=function(n){var t=n.currentTarget.result;for(var o in X)t.objectStoreNames.contains(o)&&t.deleteObjectStore(o),t.createObjectStore(o);ee(e)}}function ne(e){e?(e.close(),Z("IndexedDB: CONNECTION CLOSED")):Z("IndexedDB: DB NOT FOUND")}var te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=window.indexedDB.deleteDatabase($);n.oncomplete=function(){console.log("IndexedDB: ",$,"IS DELETED"),e&&e()},n.onerror=function(){console.log("IndexedDB: FAILED TO DELETE",$)},n.onblocked=function(){console.log("IndexedDB: OPERATION BEING BLOCKED")}},oe=function(){var e=Object(o.useState)(!0),n=Object(d.a)(e,2),t=n[0],r=n[1],c=Object(o.useState)(1),a=Object(d.a)(c,2),i=a[0],s=a[1],u=Object(o.useState)(0),l=Object(d.a)(u,2),j=l[0],h=l[1],p=Object(o.useState)(),g=Object(d.a)(p,2),O=g[0],x=g[1];return Object(o.useEffect)((function(){ee((function(e){ne(e),r(!1)}))}),[]),Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(F.Section,{children:[Object(W.jsxs)(F.InfoWrapper,{children:["IndexedDB = ",Object(W.jsxs)(F.Value,{children:[j,"MB"]})]}),Object(W.jsx)(F.Btn.Clear,{disabled:t,onClick:function(){return te((function(){return h(0)}))},children:"Reset"}),Object(W.jsx)(F.Btn,{disabled:t,onClick:function(){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=X.messages,o=b(e*f),r="msg_".concat(Date.now().toString());try{ee((function(e){var c=e.transaction([t],"readwrite").objectStore(t).add(o,r);c.onerror=function(){Z("IndexedDB ERR: FAILED TO ADD DATA")},c.onsuccess=function(){Z("IndexedDB: DATA ROW ADDED"),ne(e),n&&n()}}))}catch(c){Z("IndexedDB ERR:")}}(i,(function(){return h(j+i)}))},children:"Add"}),Object(W.jsx)(q,{type:"number",postTask:function(e){return s(e)}})]}),Object(W.jsxs)(F.Section,{children:[Object(W.jsx)(F.Btn.Clear,{disabled:t,onClick:function(){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:X.messages,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{ee((function(o){var r=o.transaction([n],"readwrite").objectStore(n).delete(e);r.onerror=function(){Z("IndexedDB ERR: FAILED TO DELETE")},r.onsuccess=function(){Z("IndexedDB: DATA ROW DELETED"),ne(o),t&&t()}}))}catch(o){console.log("IndexedDB ERR:",o)}}(O,X.messages)},children:"Delete"}),Object(W.jsx)(q,{defaultVal:"",placeholder:"Object key",width:"80px",postTask:function(e){return x(e)}})]})]})},re="demo-cache",ce=function(){var e=Object(l.a)(u.a.mark((function e(n,t){var o,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="/cache_".concat(Date.now().toString(),"_").concat(n,"MB"),r=new Response(b(n*f)),e.next=4,caches.open(re);case 4:return c=e.sent,e.abrupt("return",c.put(o,r).then((function(){console.log('CACHE STORAGE: SUCCESSFULLY ADDED "'.concat(o,'"')),t()})).catch((function(e){alert("CACHE STORAGE: ERROR! FAILED TO WRITE CACHE")})));case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();function ae(){return ie.apply(this,arguments)}function ie(){return(ie=Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,caches.open(re);case 2:return n=e.sent,e.next=5,n.keys();case 5:e.sent.forEach((function(e){n.delete(e)})),caches.delete(re).then((function(){console.log("CACHE STORAGE:",re,"IS DELETED")})).then((function(){window.location.reload(!0)})).catch((function(e){return console.error("CACHE STORAGE: FAILED TO DELETE",re,e)}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var se=function(){var e=Object(o.useState)(0),n=Object(d.a)(e,2),t=n[0],r=n[1],c=Object(o.useState)(0),a=Object(d.a)(c,2),i=a[0],s=a[1];return Object(W.jsxs)(F.Section,{children:[Object(W.jsxs)(F.InfoWrapper,{children:["Cache Storage = ",Object(W.jsxs)(F.Value,{children:[t,"MB"]})]}),Object(W.jsx)(F.Btn.Clear,{onClick:function(){return ae()},children:"Empty"}),Object(W.jsx)(F.Btn,{onClick:function(){return ce(i,(function(){return r(t+i)}))},children:"Add"}),Object(W.jsx)(q,{type:"number",postTask:function(e){return s(e)}})]})},ue=function(){var e=Object(o.useState)(!0),n=Object(d.a)(e,2),t=n[0],r=n[1],c=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.storage&&navigator.storage.persist&&navigator.storage.persist().then((function(e){e?console.log("Storage will not be cleared except by explicit user action"):console.log("Storage may be cleared by the UA under storage pressure.")}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(W.jsxs)(F.Wrapper,{children:[Object(W.jsx)("h2",{className:"center",children:"Offline Storage Demo"}),Object(W.jsx)(z,{refetch:t,setRefetch:r}),Object(W.jsx)(K,{refetch:t}),Object(W.jsx)(Y,{refetch:t}),Object(W.jsx)(se,{}),Object(W.jsx)(oe,{}),Object(W.jsx)(F.SectionOuter,{children:Object(W.jsx)(F.Btn.ClearAll,{id:"clearAll-Btn",onClick:function(){Q(window.localStorage),Q(window.sessionStorage),ae(),te(),r(!t)},width:"100%",children:"CLEAR ALL"})}),Object(W.jsx)(F.Section,{children:Object(W.jsx)(F.Btn,{onClick:c,style:{width:"200px"},children:"Persist storage"})})]})},le=function(){return Object(W.jsx)("div",{className:"App",children:Object(W.jsx)(ue,{})})};c.a.render(Object(W.jsx)(le,{}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/StorageDemo",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/StorageDemo","/service-worker.js");a?(!function(e){fetch(e).then((function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):i(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):i(e)}))}}()}},[[38,1,2]]]);
//# sourceMappingURL=main.7cec3741.chunk.js.map